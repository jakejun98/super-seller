# 🚚 파이썬 송장 번호 자동 생성 및 상태 업데이트 스크립트 설계서

## 프로젝트 개요
커머스 운영 효율화를 위해 '결제 완료(paid)' 된 주문 건을 자동으로 감지하여, 가상의 운송장 번호를 부여하고 주문 상태를 '배송 중(shipping)'으로 일괄 업데이트한다.

---

## Phase 2-2: 송장 번호 생성기 스크립트 요구사항

### 1. 목표 및 로직
1.  SupabaseDB와 연결한다.
2.  `orders` 테이블에서 현재 상태(`status`)가 **'paid'** 인 주문 데이터만 모두 조회(SELECT)한다.
3.  조회된 주문들을 반복문으로 순회하며 다음 작업을 수행한다.
    * **가상 송장 번호 생성:** 'CJ'로 시작하고 뒤에 랜덤한 숫자 10자리가 붙는 문자열을 생성한다. (예: `CJ1234567890`)
    * **DB 업데이트:** 해당 주문의 `id`를 기준으로, `tracking_number` 컬럼에 생성한 송장 번호를 업데이트하고, 동시에 `status`를 **'shipping'**으로 변경한다.
4.  총 몇 건의 주문이 처리되었는지 결과 로그를 출력한다.

### 2. 기술 요구 사항
- **언어:** Python 3.x
- **필수 라이브러리:** `supabase`, `python-dotenv`, `random` (파이썬 내장)
- **대상 DB 테이블:** `public.orders`

### 3. Gemini에게 요청할 프롬프트
> "위 설계서를 완벽하게 이해하고, `scripts/generate_invoices.py` 파이썬 스크립트 코드를 작성해 줘.
>
> **핵심 지시사항:**
> 1. `.env.local`을 로드해서 Supabase 클라이언트를 초기화해.
> 2. `supabase.table('orders').select('*').eq('status', 'paid').execute()`를 사용해서 대상 주문을 가져와.
> 3. 파이썬의 `random` 모듈을 써서 10자리 랜덤 숫자를 만들고 'CJ'와 합쳐.
> 4. 반복문 안에서 각 주문마다 `supabase.table('orders').update({...}).eq('id', 주문ID).execute()`를 호출해서 업데이트해.
> 5. 주석은 한글로 상세히 달아주고, 필요한 라이브러리 설치 명령어를 코드 맨 윗줄에 주석으로 적어줘."